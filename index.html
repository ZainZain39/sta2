<!DOCTYPE html>
<html lang="ja">
<head>
<title>Shop Titans Assistant</title>
<link rel="stylesheet" href="base.css">
<script src="dbmap.js"></script>
<script src="script.js"></script>
<script src="item.js"></script>
<script src="togglebutton.js"></script>
<script src="grouplist.js"></script>
<script src="showfilter.js"></script>
</head>

<body>

<header>

<div class="flex">
	<toggle-button id="selectView" class="changeView changeView2">
		<radio-button value="viewItem" checked>アイテム一覧</radio-button>
		<radio-button value="viewCheckType">進化進捗管理</radio-button>
		<radio-button value="viewHero">ヒーロー装備管理</radio-button>
		<radio-button value="viewInformation">このツールについて</radio-button>
	</toggle-button>
</div>
<div class="targetView viewItem">
<div class="flex mt5">
	<toggle-button id="selectFormat" class="changeFormat">
		<radio-button value="formatStatus" checked>ステータス閲覧</radio-button>
		<radio-button value="formatSell">販売補助</radio-button>
		<radio-button value="formatGemSell">マーケット販売補助</radio-button>
		<radio-button value="formatBuy">仕入補助</radio-button>
		<radio-button value="formatEnchantment">エンチャント補助</radio-button>
		<radio-button value="formatCheckItem">開発進捗管理</radio-button>
	</toggle-button>
</div>
</div>

</header>

<main class="reject">

<div class="targetView viewItem">
<div class="targetFormat formatStatus formatSell formatGemSell formatBuy formatEnchantment">
<div class="flex gap10 mb5">
	<toggle-button id="switchQuality" class="changeList">
		<radio-button class="quality0" value="0" checked>普通</radio-button>
		<radio-button class="quality1" value="1">上級</radio-button>
		<radio-button class="quality2" value="2">上質</radio-button>
		<radio-button class="quality3" value="3">エピック</radio-button>
		<radio-button class="quality4" value="4">レジェンド</radio-button>
	</toggle-button>

	<div class="targetFormat formatStatus">
	<toggle-button id="selectStatus" class="changeList">
		<radio-button value="" checked>＊</radio-button>
		<radio-button value="ATK">ATK</radio-button>
		<radio-button value="DEF">DEF</radio-button>
		<radio-button value="HP">HP</radio-button>
		<radio-button value="EVA">EVA</radio-button>
		<radio-button value="CRIT">CRIT</radio-button>
	</toggle-button>
	</div>

	<div class="targetFormat formatSell formatGemSell formatBuy formatEnchantment">
	<toggle-button id="switchEvent" class="changeList">
		<radio-button value="event0" checked>イベントなし</radio-button>
		<radio-button value="event1">お買い得 追加料金 +25%</radio-button>
		<radio-button value="event2">値切り 消費エネルギー -25%</radio-button>
	</toggle-button>
	</div>
</div>
</div>
</div>

<div class="targetView viewItem">
<div class="targetFormat formatSell formatGemSell formatBuy formatEnchantment">
<div class="flex gap10 mb5">
	<label>
		<span class="info">最大エネルギー：</span>
		<input type="text" id="$MaxEnergy" class="changeList" data-para="MaxEnergy" size="5">
	</label>
	<label>
		<span class="info">割引コスト上限値：</span>
		<input type="text" id="$DiscountThreshold" class="changeList" data-para="DiscountThreshold" size="5">
	</label>
	<label>
		<span class="info">追加販売還元率下限値：</span>
		<input type="text" id="$SurchargeThreshold" class="changeList" data-para="SurchargeThreshold" size="5">
	</label>
</div>
</div>
</div>

<div class="targetView viewItem">
<div class="targetFormat formatEnchantment">
<div class="flex gap10 mb5">
	<label>
		<span class="info">エレメント付与：</span>
		<select id="$ElementValue" class="changeList">
			<option value="0">未選択</option>
			<option value="350000" selected>ティア９のエレメント</option>
			<option value="105000">7.火のエレメント(火)</option>
			<option value="100000">7.潮のエレメント(水)</option>
			<option value="99500">7.強風のエレメント(風)</option>
			<option value="96500">7.野生のエレメント(地)</option>
			<option value="96500">7.聖なるエレメント(光)</option>
			<option value="105000">7.不浄のエレメント(闇)</option>
			<option value="8150">4.燃えさしのエレメント(火)</option>
			<option value="7400">4.水疱のエレメント(水)</option>
			<option value="8550">4.そよ風のエレメント(風)</option>
			<option value="9800">4.自然のエレメント(地)</option>
			<option value="9600">4.光のエレメント(光)</option>
			<option value="10500">4.汚染のエレメント(闇)</option>
		</select>
	</label>
	<label>
		<span class="info">精霊付与：</span>
		<select id="$SpiritValue" class="changeList">
			<option value="0">未選択</option>
			<option value="350000" selected>ティア９の精霊</option>
			<option value="110000">7.サイの精霊</option>
			<option value="110000">7.フクロウの精霊</option>
			<option value="115000">7.アルマジロの精霊</option>
			<option value="125000">7.馬の精霊</option>
			<option value="130000">7.カバの精霊</option>
			<option value="130000">7.トカゲの精霊</option>
			<option value="9200">4.狼の精霊</option>
			<option value="9400">4.牡山羊の精霊</option>
			<option value="9750">4.ワシの精霊</option>
			<option value="10000">4.雄牛の精霊</option>
			<option value="11000">4.毒蛇の精霊</option>
			<option value="12000">4.猫の精霊</option>
		</select>
	</label>
</div>
</div>
</div>

<div class="targetView viewItem">
	<div id="$viewItem" class="flex gap10"></div>
	<div class="targetFormat formatStatus">
		<div class="information">
		ヒーローの装備をグレードアップする際に「防御付きの剣って何があったっけ？」などの悩みを解消する機能<br>
		エンチャント後のステータスも表示できるようにしたい<br>
		</div>
	</div>
	<div class="targetFormat formatSell">
		<div class="information">
		販売価格と割引時の獲得エネルギー、追加販売時の消費エネルギーから、アイテムをどう販売するのが得か判定する機能<br>
		推奨販売方法の欄の背景色は品質を表し、"半"は割引推奨、"倍"は追加販売推奨を表す<br>
		ただし品質が上がればマーケット販売したほうが良いこともあるのでその辺は自己判断でお願いします<br>
		（私は商人レベル上げのため基本的にはNPC販売で、ジェムになりそうなものだけマーケット販売してます）<br>
		<br>
		きちんと計算させるために先に[開発進捗管理][進化進捗管理]で情報を入力してください<br>
		[最大エネルギー]にはあなたのお店の最大エネルギを入力<br>
		[割引コスト上限値]には普段割引しているアイテムのコストを入力<br>
		[追加販売還元率下限値]には普段追加販売しているアイテムの還元率を入力<br>
		<br>
		計算式<br>
		　コスト＝（価格÷２）÷割引時獲得エネルギー　　※要するに１エネルギーを獲得するのに支払うゴールド<br>
		　還元率＝追加販売価格÷追加販売消費エネルギー　※要するに１エネルギーで獲得するゴールド<br>
		<br>
		一覧を見ればティア10は還元率が悪く儲からないので追加販売するべきではないことがわかる<br>
		なお黄金製品は非常に還元率が良いので、追加販売できるだけ最大エネルギーを高め、価格アップまで開発を頑張ってから売るのが儲けるコツ<br>
		<br>
		注意というか言い訳<br>
		ゲーム内ではエレメントタイタンなどを取得すると「全アイテムの追加料金の値＋１％」と説明されているが、計算値とゲーム値が一致しない<br>
		公式サイトのスプレッドシートに正しく計算する元ネタもないため多少誤差がありますがご了承ください<br>
		</div>
	</div>
	<div class="targetFormat formatGemSell">
		<div class="information">
		アイテムをマーケットで売るならいくらで売れば得か判定してくれる機能<br>
		<br>
		基本となるのは追加販売の価格で、それから追加販売コストを引いたものが純利益となる<br>
		追加販売コスト＝追加販売エネルギー×エネルギーを貯めるために使用したコストなので下記の計算式となる<br>
		<br>
		計算式<br>
		Ａ：追加販売価格－（追加販売エネルギー×割引コスト）＝NPC販売の純利益<br>
		<br>
		マーケットでゴールド売りする場合は手取りがＡ以上ならば得ということになる<br>
		ジェム売りする場合は純利益を下記の計算式でジェム換算する<br>
		<br>
		計算式<br>
		Ｂ：Ａ÷ジェムゴールド換算率＝ジェム換算した純利益<br>
		<br>
		例えば上質なボーパルの剣をNPCに売る場合、追加販売価格700万から追加販売コスト100万程度を引いたおよそ600万が純利益となる<br>
		※価格アップおよび剣ラーナー取得を想定<br>
		マーケットでゴールド販売するなら手数料10%を考慮して670万以上で売れば儲けとなり、ジェム販売なら600万÷80万＝7.5で繰り上げて8ジェムを手数料20%考慮の10ジェムで売れれば儲けとなる<br>
		（マーケット掲示期間を長くすると手数料率も上がるので要注意）<br>
		（他者リクエストへの応答であれば手数料不要なので600万または8ジェムで売ればよい）<br>
		<br>
		た　だ　し　！<br>
		マーケット販売には商人経験値が入手できないという大きなデメリットがあるので注意<br>
		このゲームは"商人レベル イズ パワー"であり"ジェム イズ パワー"でもある<br>
		大いに悩もう<br>
		<br>
		以下は独り言<br>
		低ティア品は割引販売でエネルギーにするのが定石なので、そのあたりを考慮した一覧になるよう検討中<br>
		わざわざエネルギー品を買わなくても自作すれば良いだけなので一覧から除外するか価格を非表示にするか…<br>
		</div>
	</div>
	<div class="targetFormat formatEnchantment">
		<div class="information">
		エンチャント後の価格はどれも同じではなく、価格に対し丸め処理が入るのでそれを可視化する機能<br>
		（高ティア品に低ティアエンチャすると価格上昇なくなったりする）<br>
		<br>
		以下は独り言<br>
		今はエンチャント前の状態で追加販売対象品だけリストアップされてる<br>
		エンチャント後の状態で追加販売対象となるものも表示されるように修正したいところ<br>
		前のバージョンみたいにプラスマイナス表記で文字色変えたいけどいじり過ぎてこんな簡単な修正もできてない…<br>
		</div>
	</div>
</div>

<div class="targetView viewCheckType">
	<div id="$viewCheckType" class="flex gap10"></div>
</div>

<div class="targetView viewHero">
	<div id="$viewHero" class="information">
		<div class="information">
		ヒーローごとの装備品およびエンチャント情報と換装予定を管理する機能（にする予定）<br>
		全然インタフェースのイメージが沸いてこないので頓挫中…<br>
		</div>
	</div>
</div>

<div class="targetView viewInformation">
	<div id="$viewInformation" class="information">
	2021/09/24 機能見直しおよび内部処理大幅改造<br>
	<br>
	とりあえず見た目のイメージだけできたのでアップ<br>
	それなりに動くけどタイプ別価格アップの対応やらイベント対応やらが未実装なので値は信用しないでね<br>
	<br>
	寄付状況管理機能はゲームインタフェースの改善によりお役御免かなと削除してみた<br>
	</div>
</div>
</main>

<div class="targetView viewItem">
<footer>
<div class="mb5">
<toggle-button id="filterTier" class="changeList">
	<reset-button checked>全選択</reset-button>
	<check-button value="1">１</check-button>
	<check-button value="2">２</check-button>
	<check-button value="3">３</check-button>
	<check-button value="4">４</check-button>
	<check-button value="5">５</check-button>
	<check-button value="6">６</check-button>
	<check-button value="7">７</check-button>
	<check-button value="8">８</check-button>
	<check-button value="9">９</check-button>
	<check-button value="10">10</check-button>
	<check-button value="11">11</check-button>
</toggle-button>
</div>
<div class="">
<toggle-button id="filterRack" class="changeList">
	<reset-button checked>全選択</reset-button>
	<radio-button value="Sword,Axe,Mace,Spear,Staff">縦置きラック</radio-button>
	<radio-button value="Dagger,Bow,Wand,Gun,Crossbow,Shield">テーブル</radio-button>
	<radio-button value="Helmet,Rogue Hat,Magician Hat">マネキン(頭)</radio-button>
	<radio-button value="Heavy Armor,Light Armor,Clothes">マネキン(胴)</radio-button>
	<radio-button value="Gauntlets,Gloves,Heavy Footwear,Light Footwear">マネキン(手足)</radio-button>
	<radio-button value="Herbal Medicine,Potion,Spell,Ring,Amulet">棚</radio-button>
</toggle-button>
</div>
<div id="showFilterType" is="show-filter" select="">
	<img src="./image/Sword.png" class="Sword">
	<img src="./image/Axe.png" class="Axe">
	<img src="./image/Dagger.png" class="Dagger">
	<img src="./image/Mace.png" class="Mace">
	<img src="./image/Spear.png" class="Spear">
	<img src="./image/Bow.png" class="Bow">
	<img src="./image/Wand.png" class="Wand">
	<img src="./image/Staff.png" class="Staff">
	<img src="./image/Gun.png" class="Gun">
	<img src="./image/Crossbow.png" class="Crossbow">
	<img src="./image/Heavy Armor.png" class="Heavy-Armor">
	<img src="./image/Light Armor.png" class="Light-Armor">
	<img src="./image/Clothes.png" class="Clothes">
	<img src="./image/Helmet.png" class="Helmet">
	<img src="./image/Rogue Hat.png" class="Rogue-Hat">
	<img src="./image/Magician Hat.png" class="Magician-Hat">
	<img src="./image/Gauntlets.png" class="Gauntlets">
	<img src="./image/Gloves.png" class="Gloves">
	<img src="./image/Heavy Footwear.png" class="Heavy-Footwear">
	<img src="./image/Light Footwear.png" class="Light-Footwear">
	<img src="./image/Herbal Medicine.png" class="Herbal-Medicine">
	<img src="./image/Potion.png" class="Potion">
	<img src="./image/Spell.png" class="Spell">
	<img src="./image/Shield.png" class="Shield">
	<img src="./image/Ring.png" class="Ring">
	<img src="./image/Amulet.png" class="Amulet">
</div>
</footer>
</div>

<div class="loading">Now Loading...</div>
<div id="toTop"class="to-top reject"></div>

</body>
</html>
